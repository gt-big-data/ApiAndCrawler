<html>
	<head>
		<style>
		#map {
			height: 400px;
			width: 100%;
		}
		</style>
	</head>
	<body>

		<div id="map"></div>

		<script>
            var coords = [];
            var counter = 0;
			function initMap() {
                var uluru = {lat: 39.731879, lng: -101.614792};
                var map = new google.maps.Map(document.getElementById('map'), {
                  zoom: 4,
                  center: uluru
                });

                google.maps.event.addListener(map, 'click', function(event) {
                    coords.push(event.latLng);
                    console.log(coords);
                	returnCoords(map, event.latLng);
                    counter = counter + 1;
                    if (counter >= 2) {
                        google.maps.event.clearListeners(map, 'click');
                        /* var rect = new google.maps.Rectangle({
                            map: map,
                            bounds: new google.maps.LatLngBounds(coords[0],coords[1]) */
                        var circle = new google.maps.Circle({
                            map: map,
                            center: coords[0],
                            radius: measure(coords[0].lat(),coords[0].lng(),coords[1].lat(),coords[1].lng()),
                            fillColor: 'white'
                        });
                        //S});
                    }
                });
            }

            function returnCoords(map, location) {
            	var marker = new google.maps.Marker({
            		position: location,
            		map: map
            	});
            	var infowindow = new google.maps.InfoWindow({
            		content: 'Latitude: ' + location.lat() + '<br>Longitude: ' + location.lng()
            	});
            	infowindow.open(map,marker);
            }

            function measure(lat1, lon1, lat2, lon2){  // generally used geo measurement function
                var R = 6378.137; // Radius of earth in KM
                var dLat = lat2 * Math.PI / 180 - lat1 * Math.PI / 180;
                var dLon = lon2 * Math.PI / 180 - lon1 * Math.PI / 180;
                var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                Math.sin(dLon/2) * Math.sin(dLon/2);
                var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
                var d = R * c;
                return d * 1000; // meters
            }

        </script>

        <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCAbE03GnNDUJ2udV-GdQk7BxhauZcYkAk&callback=initMap">
            </script>
	</body>
</html>